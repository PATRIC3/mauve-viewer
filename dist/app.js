!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){function e(e){for(var n,o,a=e[0],i=e[1],c=0,u=[];c<a.length;c++)o=a[c],r[o]&&u.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);for(l&&l(e);u.length;)u.shift()()}var n={},r={0:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise(function(e,o){n=r[t]=[e,o]});e.push(n[2]=a);var i,c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(t){return o.p+""+({}[t]||t)+".js"}(t),i=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+o+": "+a+")");i.type=o,i.request=a,n[1](i)}r[t]=void 0}};var u=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,c.appendChild(l)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/dist/",o.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=i;return o(o.s=2)}([function(t,e){t.exports={schemeCategory20:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return i});var r=n(0);function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ele=e.ele,this.data=e.data,this.d3=e.d3,this.init()}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"init",value:function(){this.ele.innerHTML='\n            <div class="mauve-viewer">\n                <div class="mv-header" style="text-align: left;">\n                    <h4 class="title">Mauve Viewer (Alpha)</h4>\n                    <div class="help-text">\n                        <b>Tips:</b> click and drag to pan; use mouse wheel or double click to zoom.\n                    </div><br>\n                    <button class="reset-btn">Reset</button><br>\n                </div>\n                <br>\n                <div class="mv-chart">\n                    <svg></svg>\n\n                    <div style="position: relative;">\n                        <div class="mv-context-menu" style="display: none;">\n                            <ul>\n                                <li id="nucleotide-align">Align by nucleotide</li>\n                                <li>Another item</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>',this.render(this.d3,this.data)}},{key:"render",value:function(t,e){console.log("data",e);var n=this.getGenomeRegions(e),a=Object.keys(n).length,i=n[1].length,c=Math.max.apply(Math,o([].concat.apply([],e).map(function(t){return t.end})))+100;console.log(this.ele.querySelector("svg")),t.select(this.ele.querySelector("svg")).remove();var l,u=t.select(this.ele.querySelector(".mv-chart")).append("svg").attr("width",1e3).attr("height",165*a),s=+u.attr("width"),f=+u.attr("height"),d=t.zoom().scaleExtent([1,150]).translateExtent([[-2e3,0],[s+90,f+100]]).on("zoom",function(){for(var e=t.event.transform.rescaleX(m[2]),n=0;n<h.length;n++){var r=v[n],o=h[n],a=m[n];r.call(o.scale(t.event.transform.rescaleX(a)))}var i=t.event.sourceEvent;i&&"wheel"!==i.type&&"click"!==i.type?"mousemove"===t.event.sourceEvent.type&&t.selectAll(".region").attr("x",function(t){return e(t.start)}):t.selectAll(".region").attr("x",function(t){return e(t.start)}).attr("width",function(t){return e(t.end)-e(t.start)});t.selectAll("path.lcb-line").attr("d",function(t){var n=t.map(function(t){return{start:t.start,end:t.end,x:e(t.start)+(e(t.end)-e(t.start))/2,y:t.y}});return _(n)}),t.selectAll(".region").on("mousemove",null).on("mouseover",null).on("mouseenter",null).on("mouseleave",null).on("mouseout",null),P(e)});u.on("dblclick.zoom",null);for(var p=140,h=[],v=[],m=[],y=0;y<a;y++){l=t.scaleLinear().domain([0,c]).range([0,s+1]);var g=t.axisBottom(l).ticks((s+2)/(f+2)*10).tickSize(10),b=u.append("g").attr("class","axis axis-x-".concat(y)).call(g).attr("transform","translate(0, ".concat(20+y*(p+0),")"));u.append("text").attr("x",10).attr("y",20+y*p-2).text(n[y+1][0].name).attr("font-family","sans-serif").attr("font-size","10px").attr("fill","#aaaaaa"),h.push(g),v.push(b),m.push(l)}for(var x=50,w=20,k=function(t){var e=n[t];u.select("g").append("g").attr("class","track track-".concat(t)).selectAll("rect").data(e).enter().append("rect").attr("class",function(e){return"region region-track-".concat(t," region-").concat(e.id," group-").concat(e.groupID)}).attr("x",function(t){return l(t.start)}).attr("y",function(e){return T(t,e.strand)}).attr("width",function(t){return l(t.end-t.start)}).attr("height",w).attr("stroke","#fffff").attr("fill",function(t){return r.schemeCategory20[t.groupID%i%20]})},A=1;A<=a;A++)k(A);for(var j=[],E=1;E<=a;E++){var S=T(E,"-"),O=u.append("line").attr("class","hover-line").style("stroke","#222").attr("y1",S-20).attr("y2",S+65);j.push(O)}P(l);var M=[];e.forEach(function(t){var e=[];t.forEach(function(t){var n=t.lcb_idx-1;e.push({start:t.start,end:t.end,x:l(t.start)+(l(t.end)-l(t.start))/2,y:20+T(n+1,t.strand)+w/2})}),M.push(e)});var _=t.line().x(function(t){return t.x}).y(function(t){return t.y});function P(e){var n=e,r=j;u.selectAll(".region").on("mousemove",function(e){var o=e.groupID,a=t.mouse(this)[0],i=e.lcb_idx,c=e.strand,l=a-n(e.start);r[i-1].attr("x1",a).attr("x2",a),u.selectAll(".group-".concat(o)).each(function(t){var e;t.lcb_idx!==i&&(e=c!==t.strand?n(t.end)-l:n(t.start)+l,r[t.lcb_idx-1].attr("x1",e).attr("x2",e))})}),u.selectAll(".region").on("mouseover",function(t){for(var e=0;e<r.length;e++)r[e].attr("opacity",1)}).on("mouseout",function(t){for(var e=0;e<r.length;e++)r[e].attr("opacity",0)})}function T(t,e){return("-"===e?x+w:x)+(t-1)*p}M.forEach(function(t,e){u.datum(t).insert("path",":first-child").attr("class","lcb-line").attr("d",_(t)).attr("stroke-width",1).attr("stroke",r.schemeCategory20[e%20]).attr("fill","none")}),t.select(this.ele.querySelector(".reset-btn")).on("click",function(){d.transform(u,t.zoomIdentity)}),u.call(d),u.selectAll(".hover-line").on("contextmenu",function(){t.event.preventDefault(),showContextMenu.bind(this)()}),u.selectAll(".region").on("contextmenu",function(e,n){t.event.preventDefault(),showContextMenu.bind(this)()})}},{key:"getSharedLCBs",value:function(t){var e=Math.max.apply(Math,o(t.map(function(t){return t.length})));return t.filter(function(t){return t.length===e})}},{key:"getGenomeRegions",value:function(t){var e={},n=0;return t.forEach(function(t,r){t.forEach(function(t){n+=1,t.id=n,t.groupID=r;var o=t.lcb_idx;o in e?e[o].push(t):e[o]=[t]})}),e}}]),t}()},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";n.r(e);var r=n(1);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Promise.all([n.e(2).then(n.bind(null,6)),n.e(3).then(n.t.bind(null,5,7))]).then(function(t){var e=o(t,2),n=e[0];e[1].get("brucella-lcbs.json").then(function(t){var e=document.getElementById("chart"),o=t.data;new r.default({ele:e,data:o,d3:n})}).catch(function(t){console.log("error!",t)})}).catch(function(t){return"An error occurred while loading the component"})}])});
//# sourceMappingURL=app.js.map